{"version":3,"file":"index.js","sources":["../src/js/pixabay-apy.js","../src/js/render-funkcions.js","../src/main.js"],"sourcesContent":["\nexport default getPictures;\nimport axios from 'axios';  \n\n\nasync function  getPictures (tag, page) {\n    //https://pixabay.com/api/?q=&image_type=photo&orientation=horizontal&safesearch=true&key=47380819-2a2ad5e165b633e18b6fd0fd3\n    const API_URL = `https://pixabay.com/api`\n  const API_KEY = `47380819-2a2ad5e165b633e18b6fd0fd3`\n  return await axios.get(`${API_URL}/?q=${tag}&image_type=photo&orientation=horizontal&safesearch=true&key=${API_KEY}`, {\n    params: {\n\n      page,\n      per_page: 15,\n    }\n   });\n  \n      \n}\n\n\n","export default createMurkup;\n\nfunction createMurkup(arr) {\n\n    return arr.map(({webformatURL,largeImageURL,tags,likes,views,comments,downloads }) => `<li class=\"list-item\" >\n  <a href=\"${largeImageURL}\" alt=\"${tags}\" title=\"\"/>\n    <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"img-item\">\n  <div class=\"list-container\">\n  <p class=\"item\"><span class=\"item-text\">Likes</span> <span>${likes}</span></p>\n  <p class=\"item\"><span class=\"item-text\">Wiews</span> <span>${views}</span></p>\n  <p class=\"item\"><span class=\"item-text\">Comments</span> <span>${comments}</span></p>\n  <p class=\"item\"><span class=\"item-text\">Downlods</span> <span>${downloads}</span></p>\n  </div></a>\n</li>`).join(\"\")\n    \n} ","\"use strict\"\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport getPictures from \"./js/pixabay-apy\";\nimport createMurkup from \"./js/render-funkcions\";\n\nconst litebox = new SimpleLightbox('.list-js a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionClass: 'imageTitle',\n});\nconst form = document.querySelector(\".form-js\");\nconst list = document.querySelector(\".list-js\");\nconst loader = document.querySelector(\".loader\");\nconst loadBtn = document.querySelector(\".js-load-btn\");\n\n\nform.addEventListener(\"submit\", toSabmit);\nloadBtn.addEventListener(\"click\", onLoadMore)\nlet page = 1;\nlet totalPage = 1;\n\n\nfunction toSabmit(evt) {\n    evt.preventDefault();\n    \n    const { picture } = evt.target.elements;\n    const value = picture.value.trim();\n    \n     list.innerHTML = \"\"; \n    if(!value || value === \" \"){\n        { iziToast.show({\n      title:\":(\",         \n      message: \"Please add request!\",\n      position: \"center\",\n      color: \"red\"\n            });\n            list.innerHTML = \":(\";\n            return\n              \n            }\n    }\n  \n    page = 1\n    \n    loader.classList.remove(\"hidden\");\n   loadBtn.classList.replace(\"more-btn\", \"hidden\");\n    getPictures(value,page)\n    \n        .then(({ data: { hits, totalHits\n        } }) => {\n            \n       totalPage = Math.ceil(totalHits / hits.length);\n       console.log(page) \n            \n            if (!hits.length) { iziToast.show({\n      title:\"X\",         \n      message: \"Sorry, there are no images matching your search query. Please try again!\",\n      position: \"center\",\n      color: \"red\"\n            });\n                \n                list.innerHTML = \"<h1>Ooops... ðŸ‘»</h1>\";\n                               \n                \n            }\n            else {\n                list.innerHTML = createMurkup(hits);\n                litebox.refresh(); \n              if (page >= totalPage ) {\n                    loadBtn.classList.replace(\"more-btn\", \"hidden\")\n                }\n                loadBtn.classList.replace(\"hidden\", \"more-btn\");\n               \n                 \n                }           \n            \n         })\n        .catch((error) => {\n            console.log(error.message)\n            iziToast.show({\n                title: \"X\",\n                message: `${error.message}`,\n                position: \"center\",\n                color: \"red\"\n            })\n        })\n        .finally(() => {\n            picture.value = \"\" \n            loader.classList.add(\"hidden\");\n            \n            \n        })\n}\nasync function onLoadMore() {\n    page += 1;\n    console.log(page)\n    loadBtn.disabled = true;\n    try { \n        const { data: { hits, totalHits\n        } } = await getPictures(page);\n      \n        list.insertAdjacentHTML(\"beforeend\", createMurkup(hits));\n        totalPage = Math.ceil(totalHits / hits.length);\n        console.log(totalPage)\n        \n\n        if (page >= totalPage || !totalHits) {\n            loadBtn.classList.replace(\"more-btn\", \"hidden\");\n              iziToast.show({\n      title:\"X\",         \n      message: \"Sorry, there are no images matching your search query. Please try again!\",\n      position: \"center\",\n      color: \"red\"\n            });  \n        }\n        const item = document.querySelector(\".list-item\");\n        const itemHeight = item.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: itemHeight * 2,\n            behavior: \"smooth\",\n        })\n        litebox.refresh()\n    }\n    catch (error) {\n        console.log(error.message);\n        iziToast.show({\n      title:\"X\",         \n      message: `${error.message}`,\n      position: \"center\",\n      color: \"red\"\n            });  \n     }\n    finally {\n        loadBtn.disabled = false;\n    }\n}\n\n\n"],"names":["getPictures","tag","page","axios","createMurkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","litebox","SimpleLightbox","form","list","loader","loadBtn","toSabmit","onLoadMore","totalPage","evt","picture","value","iziToast","hits","totalHits","error","itemHeight"],"mappings":"owBAKA,eAAgBA,EAAaC,EAAKC,EAAM,CAItC,OAAO,MAAMC,EAAM,IAAI,8BAAiBF,CAAG,kGAA2E,CACpH,OAAQ,CAEN,KAAAC,EACA,SAAU,EACX,CACL,CAAI,CAGJ,CChBA,SAASE,EAAaC,EAAK,CAEvB,OAAOA,EAAI,IAAI,CAAC,CAAC,aAAAC,EAAa,cAAAC,EAAc,KAAAC,EAAK,MAAAC,EAAM,MAAAC,EAAM,SAAAC,EAAS,UAAAC,CAAW,IAAK;AAAA,aAC7EL,CAAa,UAAUC,CAAI;AAAA,gBACxBF,CAAY,UAAUE,CAAI;AAAA;AAAA,+DAEqBC,CAAK;AAAA,+DACLC,CAAK;AAAA,kEACFC,CAAQ;AAAA,kEACRC,CAAS;AAAA;AAAA,MAErE,EAAE,KAAK,EAAE,CAEf,CCPA,MAAMC,EAAU,IAAIC,EAAe,aAAc,CAC/C,aAAc,MACd,aAAc,IACd,aAAc,YAChB,CAAC,EACKC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,cAAc,EAGrDH,EAAK,iBAAiB,SAAUI,CAAQ,EACxCD,EAAQ,iBAAiB,QAASE,CAAU,EAC5C,IAAIlB,EAAO,EACPmB,EAAY,EAGhB,SAASF,EAASG,EAAK,CACnBA,EAAI,eAAc,EAElB,KAAM,CAAE,QAAAC,CAAS,EAAGD,EAAI,OAAO,SACzBE,EAAQD,EAAQ,MAAM,KAAI,EAGhC,GADCP,EAAK,UAAY,GACf,CAACQ,GAASA,IAAU,IACnB,CAAEC,EAAS,KAAK,CAClB,MAAM,KACN,QAAS,sBACT,SAAU,SACV,MAAO,KACb,CAAa,EACDT,EAAK,UAAY,KACjB,MAEC,CAGTd,EAAO,EAEPe,EAAO,UAAU,OAAO,QAAQ,EACjCC,EAAQ,UAAU,QAAQ,WAAY,QAAQ,EAC7ClB,EAAYwB,EAAMtB,CAAI,EAEjB,KAAK,CAAC,CAAE,KAAM,CAAE,KAAAwB,EAAM,UAAAC,CAC/B,KAAgB,CAETN,EAAY,KAAK,KAAKM,EAAYD,EAAK,MAAM,EAC7C,QAAQ,IAAIxB,CAAI,EAENwB,EAAK,QAYNV,EAAK,UAAYZ,EAAasB,CAAI,EAClCb,EAAQ,QAAO,EACbX,GAAQmB,GACNH,EAAQ,UAAU,QAAQ,WAAY,QAAQ,EAElDA,EAAQ,UAAU,QAAQ,SAAU,UAAU,IAjB9BO,EAAS,KAAK,CACxC,MAAM,IACN,QAAS,2EACT,SAAU,SACV,MAAO,KACb,CAAa,EAEGT,EAAK,UAAY,uBAejC,CAAU,EACD,MAAOY,GAAU,CACd,QAAQ,IAAIA,EAAM,OAAO,EACzBH,EAAS,KAAK,CACV,MAAO,IACP,QAAS,GAAGG,EAAM,OAAO,GACzB,SAAU,SACV,MAAO,KACvB,CAAa,CACb,CAAS,EACA,QAAQ,IAAM,CACXL,EAAQ,MAAQ,GAChBN,EAAO,UAAU,IAAI,QAAQ,CAGzC,CAAS,CACT,CACA,eAAeG,GAAa,CACxBlB,GAAQ,EACR,QAAQ,IAAIA,CAAI,EAChBgB,EAAQ,SAAW,GACnB,GAAI,CACA,KAAM,CAAE,KAAM,CAAE,KAAAQ,EAAM,UAAAC,CAC9B,GAAc,MAAM3B,EAAYE,CAAI,EAE5Bc,EAAK,mBAAmB,YAAaZ,EAAasB,CAAI,CAAC,EACvDL,EAAY,KAAK,KAAKM,EAAYD,EAAK,MAAM,EAC7C,QAAQ,IAAIL,CAAS,GAGjBnB,GAAQmB,GAAa,CAACM,KACtBT,EAAQ,UAAU,QAAQ,WAAY,QAAQ,EAC5CO,EAAS,KAAK,CACtB,MAAM,IACN,QAAS,2EACT,SAAU,SACV,MAAO,KACb,CAAa,GAGL,MAAMI,EADO,SAAS,cAAc,YAAY,EACxB,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACZ,KAAM,EACN,IAAKA,EAAa,EAClB,SAAU,QACtB,CAAS,EACDhB,EAAQ,QAAS,CACpB,OACMe,EAAO,CACV,QAAQ,IAAIA,EAAM,OAAO,EACzBH,EAAS,KAAK,CAChB,MAAM,IACN,QAAS,GAAGG,EAAM,OAAO,GACzB,SAAU,SACV,MAAO,KACb,CAAa,CACP,QACM,CACJV,EAAQ,SAAW,EACtB,CACL"}